{% extends 'base.html' %}
{% block title %}All Applications{% endblock %}
{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='applications.css') }}">
{% endblock %}

{% block content %}
<div class="applications-container">
    <header class="applications-header">
        <h1>All Applications</h1>
        <p>Review applications across all your job posts</p>
    </header>

    {% if applications %}
    <div class="applications-list">
        {% for application in applications %}
        <div class="application-item">
            <div class="application-header">
                <h3 class="job-title">{{ application.jobTitle }}</h3>
                <div class="application-date">Applied: {{ application.applicationDate }}</div>
            </div>
            
            <div class="applicant-section">
                <div class="applicant-info">
                    <h4 class="applicant-name">
                        {% if application.freelancer.firstName %}
                            {{ application.freelancer.firstName }} {{ application.freelancer.lastName or '' }}
                        {% else %}
                            {{ application.freelancer.username }}
                        {% endif %}
                    </h4>
                    <div class="applicant-contact">
                        <span class="username">@{{ application.freelancer.username }}</span>
                        <span class="email">{{ application.freelancer.contactEmail or application.freelancer.email }}</span>
                        {% if application.freelancer.phoneNumber %}
                        <span class="phone">{{ application.freelancer.phoneNumber }}</span>
                        {% endif %}
                    </div>
                    {% if application.freelancer.summary %}
                    <div class="applicant-summary">
                        <p>{{ application.freelancer.summary[:150] }}{% if application.freelancer.summary|length > 150 %}...{% endif %}</p>
                    </div>
                    {% endif %}
                </div>
                
                <div class="application-actions">
                    {% if application.resumeId > 0 %}
                    <a href="{{ url_for('recruiter_dashboard.view_resume', resume_id=application.resumeId) }}" target="_blank" class="btn btn-small">View Resume</a>
                    {% endif %}
                    <a href="mailto:{{ application.freelancer.contactEmail or application.freelancer.email }}" class="btn btn-small btn-outline">Contact</a>
                    <a href="{{ url_for('recruiter_dashboard.job_detail', job_id=application.jobId) }}" class="btn btn-small btn-secondary">View Job</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <div class="pagination-info">
        <p>Showing {{ applications|length }} application{{ 's' if applications|length != 1 else '' }}</p>
    </div>
    {% else %}
    <div class="no-applications">
        <h2>No Applications Yet</h2>
        <p>You haven't received any applications for your job posts yet.</p>
        <div class="no-applications-actions">
            <a href="{{ url_for('recruiter_dashboard.jobs') }}" class="btn btn-primary">View Your Jobs</a>
            <a href="{{ url_for('recruiter_dashboard.create_job_form') }}" class="btn btn-secondary">Create New Job</a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}