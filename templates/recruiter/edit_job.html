{% extends 'base.html' %}
{% block title %}Edit Job - {{ job.title }}{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='recruiter_profile.js') }}"></script>
{% endblock %}
{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='create-job.css') }}">
{% endblock %}

{% block content %}
<div class="create-job-container">
    <header class="create-job-header">
        <h1>Edit Job Post</h1>
        <p>Update your job posting details</p>
    </header>

    <form action="{{ url_for('recruiter_dashboard.edit_job_post', job_id=job.jobId) }}" method="post" class="job-form">
        <div class="form-section">
            <h2>Basic Information</h2>
            
            <div class="form-group">
                <label for="title">Job Title *</label>
                <input type="text" id="title" name="title" value="{{ job.title }}" placeholder="e.g. Senior Python Developer" required>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="location">Location</label>
                    <input type="text" id="location" name="location" value="{{ job.location }}" placeholder="e.g. New York, NY or Remote">
                </div>
                <div class="form-group">
                    <label for="salary">Salary ($)</label>
                    <input type="number" id="salary" name="salary" value="{{ job.salary if job.salary > 0 else '' }}" placeholder="50000" step="0.01" min="0">
                </div>
                <div class="form-group">
                    <label for="experience">Experience (Years)</label>
                    <input type="number" id="experience" name="experience" value="{{ job.experience if job.experience > 0 else '' }}" placeholder="3" min="0">
                </div>
            </div>

            <div class="form-group">
                <label for="description">Job Description *</label>
                <textarea id="description" name="description" rows="8" placeholder="Describe the role, responsibilities, and requirements..." required>{{ job.description }}</textarea>
            </div>
        </div>

        <div class="form-section">
            <h2>Current Skills</h2>
            <div class="current-skills">
                {% if job_skills %}
                <div class="skills-list">
                    {% for skill in job_skills %}
                    <div class="skill-item" data-skill-id="{{ skill.skillId }}">
                        <span class="skill-name">{{ skill.skill }}</span>
                        <button type="button" class="remove-skill-btn" onclick="removeJobSkillFromEdit({{ job.jobId }}, {{ skill.skillId }}, this)">Ã—</button>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <p class="no-skills">No skills added yet.</p>
                {% endif %}
                
                <div class="add-skill-section">
                    <input type="text" id="newJobSkill" placeholder="Add a skill (e.g., Python, JavaScript)">
                    <button type="button" onclick="addJobSkillFromEdit({{ job.jobId }})">Add Skill</button>
                </div>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Update Job Post</button>
            <a href="{{ url_for('recruiter_dashboard.job_detail', job_id=job.jobId) }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}