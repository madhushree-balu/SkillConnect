{% extends '/recruiter/base.html' %}

{% block title %}Recruiter Dashboard{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='recruiter_main.css') }}">
{% endblock %}

{% block content %}
    <!-- Companies Section -->
    <section id="companies">
        <h2>My Companies</h2>
        <div class="container" id="companiesContainer">
            <div class="company">
                <div>
                    <span>username:</span><span class="value">{{ company.username }}</span>
                </div>
                <div>
                    <span>companyName:</span><span class="value">{{ company.companyName }}</span>
                </div>
                <div>
                    <span>companyPhone:</span><span class="value">{{ company.companyPhone }}</span>
                </div>
                <div>
                    <span>companyAddress:</span><span class="value">{{ company.companyAddress }}</span>
                </div>
                <div>
                    <span>companyDescription:</span><span class="value">{{ company.companyDescription }}</span>
                </div>
                <div>
                    <span>employeeSize:</span><span class="value">{{ company.employeeSize }}</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Job Posts Section -->
    <section id="posts">
        <h2>My Job Posts</h2>
        <div class="container" id="postsContainer">
            {% for post in posts %}
                <a href="/recruiter/post/{{ post.postId }}">
                    <div class="post">
                        <h3>{{ post.title }}</h3>
                        <p>{{ post.description }}</p>
                    </div>
                </a>
            {% endfor %}
        </div>
    </section>

    <script>
        function logout() {
            fetch("/api/recruiter/logout", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "X-CSRF-TOKEN": getCookie("csrf_access_token")
                },
                credentials: "include"
            })
            .then(response => response.json())
            .then(data => {
                if (data.message) {
                    alert('Logged out successfully!');
                    window.location.href = '/login';
                } else {
                    alert('Logout failed');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Logout failed');
            });
        }
    </script>

{% endblock %}